<section data-ng-controller="ToolsController" data-ng-init="gatherTalents()">
    <div class="page-header">
        <h1>Call List</h1>
    </div>
    <div class="col-md-12" data-ng-init="gatherTalentsToCall()">
    	<h3>Talent to Call</h3>
    	<div class="row">
    		<table class="table table-striped">
    			<tr>
    				<th>
                        <a href="" ng-click="updatePred(predicate == 'data.name' ? '-data.name' : 'data.name'); reverse=false">Talent Name</a></span>
                        <span ng-if="predicate == '-data.name'">(^)</span>
                        <span ng-if="predicate == 'data.name'">(V)</span>
                    </th>
    				<th>
                        <a href="" ng-click="updatePred(predicate == 'data.parentName' ? '-data.parentName' : 'data.parentName'); reverse=false">Parent Name</a></span>
                        <span ng-if="predicate == '-data.parentName'">(^)</span>
                        <span ng-if="predicate == 'data.parentName'">(V)</span>
                    </th>
    				<th>Phone #</th>
    				<th>Alt Phone #</th>
    				<th>
                        <a href="" ng-click="updatePred(predicate == 'data.locationISDN' ? '-data.locationISDN' : 'data.locationISDN'); reverse=false">Location</a></span>
                        <span ng-if="predicate == '-data.locationISDN'">(^)</span>
                        <span ng-if="predicate == 'data.locationISDN'">(V)</span>
                    </th>
    				<th>
                        <a href="" ng-click="updatePred(predicate == 'project.title' ? '-project.title' : 'project.title'); reverse=false">Project</a></span>
                        <span ng-if="predicate == '-project.title'">(^)</span>
                        <span ng-if="predicate == 'project.title'">(V)</span>
                    </th>
    				<th>
                        <a href="" ng-click="updatePred(predicate == 'project.estimatedCompletionDate' ? '-project.estimatedCompletionDate' : 'project.estimatedCompletionDate'); reverse=false">Due Time/Date</a></span>
                        <span ng-if="predicate == '-project.estimatedCompletionDate'">(^)</span>
                        <span ng-if="predicate == 'project.estimatedCompletionDate'">(V)</span>
                    </th>
    				<th>Status</th>
    				<th>Email</th>
    			</tr>
	    		<tr ng-repeat="(key, talent) in callProjects | orderBy:predicate:reverse">
	    			<td>{{talent.data.name}} {{talent.data.lastName}}</td>
	    			<td>{{talent.data.parentName}}</td>
	    			<td>{{talent.data.phone}}</td>
	    			<td>{{talent.data.phone2}}</td>
	    			<td>{{talent.data.locationISDN}}</td>
	    			<td><a href="/#!/projects/{{talent.project._id}}" target="_blank">{{talent.project.title}}</a></td>
	    			<td>{{talent.project.estimatedCompletionDate | amDateFormat:'MM/DD/YY h:mm a'}}</td>
					<td><select ng-model="callProjects[key].status" style="width:100px" ng-change="updateStatus(talent.data._id,talent.project._id, callProjects[key].status)" ng-options="item for item in talentStatus"></select></td>
					<td><button class="btn btn-primary" ng-click="emailCallListTalent(talent,talent.project._id)"><img style="width:30px;height:auto" src="/img/envelope.png" alt="envelope image"></button></td>
	    		</tr>
    		</table>
    	</div>
    </div>
    <div class="col-md-12" data-ng-init="gatherTalentsMessagesLeft()">
    	<h3>Messages Left</h3>
    	<div class="row">
    		<table class="table table-striped">
    			<tr>
    				<th>
                        <a href="" ng-click="updatePred(predicate == 'data.name' ? '-data.name' : 'data.name'); reverse=false">Talent Name</a></span>
                        <span ng-if="predicate == '-data.name'">(^)</span>
                        <span ng-if="predicate == 'data.name'">(V)</span>
                    </th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'data.parentName' ? '-data.parentName' : 'data.parentName'); reverse=false">Parent Name</a></span>
                        <span ng-if="predicate == '-data.parentName'">(^)</span>
                        <span ng-if="predicate == 'data.parentName'">(V)</span>
                    </th>
                    <th>Phone #</th>
                    <th>Alt Phone #</th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'data.locationISDN' ? '-data.locationISDN' : 'data.locationISDN'); reverse=false">Location</a></span>
                        <span ng-if="predicate == '-data.locationISDN'">(^)</span>
                        <span ng-if="predicate == 'data.locationISDN'">(V)</span>
                    </th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'project.title' ? '-project.title' : 'project.title'); reverse=false">Project</a></span>
                        <span ng-if="predicate == '-project.title'">(^)</span>
                        <span ng-if="predicate == 'project.title'">(V)</span>
                    </th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'project.estimatedCompletionDate' ? '-project.estimatedCompletionDate' : 'project.estimatedCompletionDate'); reverse=false">Due Time/Date</a></span>
                        <span ng-if="predicate == '-project.estimatedCompletionDate'">(^)</span>
                        <span ng-if="predicate == 'project.estimatedCompletionDate'">(V)</span>
                    </th>
    				<th>Status</th>
    				<th>Email</th>
    			</tr>
	    		<tr ng-repeat="(key, talent) in messagedTalents | orderBy:predicate:reverse">
	    			<td>{{talent.data.name}} {{talent.data.lastName}}</td>
	    			<td>{{talent.data.parentName}}</td>
	    			<td>{{talent.data.phone}}</td>
	    			<td>{{talent.data.phone2}}</td>
	    			<td>{{talent.data.locationISDN}}</td>
	    			<td><a href="/#!/projects/{{talent.project._id}}" target="_blank">{{talent.project.title}}</a></td>
	    			<td>{{talent.project.estimatedCompletionDate | amDateFormat:'MM/DD/YY h:mm a'}}</td>
					<td><select ng-model="messagedTalents[key].status" style="width:100px" ng-change="updateStatus(talent.data._id,talent.project._id, messagedTalents[key].status)" ng-options="item for item in talentStatus"></select></td>
					<td><button class="btn btn-primary" ng-click="emailCallListTalent(talent,talent.project._id)"><img style="width:30px;height:auto" src="/img/envelope.png" alt="envelope image"></button></td>
	    		</tr>
    		</table>
    	</div>
    </div>
    <div class="col-md-12" data-ng-init="gatherTalentsAlreadyScheduled()">
    	<h3>Already Scheduled Talent</h3>
    	<div class="row">
    		<table class="table table-striped">
    			<tr>
    				<th>
                        <a href="" ng-click="updatePred(predicate == 'data.name' ? '-data.name' : 'data.name'); reverse=false">Talent Name</a></span>
                        <span ng-if="predicate == '-data.name'">(^)</span>
                        <span ng-if="predicate == 'data.name'">(V)</span>
                    </th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'data.parentName' ? '-data.parentName' : 'data.parentName'); reverse=false">Parent Name</a></span>
                        <span ng-if="predicate == '-data.parentName'">(^)</span>
                        <span ng-if="predicate == 'data.parentName'">(V)</span>
                    </th>
                    <th>Phone #</th>
                    <th>Alt Phone #</th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'data.locationISDN' ? '-data.locationISDN' : 'data.locationISDN'); reverse=false">Location</a></span>
                        <span ng-if="predicate == '-data.locationISDN'">(^)</span>
                        <span ng-if="predicate == 'data.locationISDN'">(V)</span>
                    </th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'project.title' ? '-project.title' : 'project.title'); reverse=false">Project</a></span>
                        <span ng-if="predicate == '-project.title'">(^)</span>
                        <span ng-if="predicate == 'project.title'">(V)</span>
                    </th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'project.estimatedCompletionDate' ? '-project.estimatedCompletionDate' : 'project.estimatedCompletionDate'); reverse=false">Due Time/Date</a></span>
                        <span ng-if="predicate == '-project.estimatedCompletionDate'">(^)</span>
                        <span ng-if="predicate == 'project.estimatedCompletionDate'">(V)</span>
                    </th>
    				<th>Status</th>
    				<th>Email</th>
    			</tr>
	    		<tr ng-repeat="(key, talent) in alreadyScheduledTalents | orderBy:predicate:reverse">
	    			<td>{{talent.data.name}} {{talent.data.lastName}}</td>
	    			<td>{{talent.data.parentName}}</td>
	    			<td>{{talent.data.phone}}</td>
	    			<td>{{talent.data.phone2}}</td>
	    			<td>{{talent.data.locationISDN}}</td>
	    			<td><a href="/#!/projects/{{talent.project._id}}" target="_blank">{{talent.project.title}}</a></td>
	    			<td>{{talent.project.estimatedCompletionDate | amDateFormat:'MM/DD/YY h:mm a'}}</td>
					<td><select ng-model="alreadyScheduledTalents[key].status" style="width:100px" ng-change="updateStatus(talent.data._id,talent.project._id, alreadyScheduledTalents[key].status)" ng-options="item for item in talentStatus"></select></td>
					<td><button class="btn btn-primary" ng-click="emailCallListTalent(talent,talent.project._id)"><img style="width:30px;height:auto" src="/img/envelope.png" alt="envelope image"></button></td>
	    		</tr>
    		</table>
    	</div>
    </div>
    <div class="col-md-12" data-ng-init="gatherEmailedTalent()">
        <h3>Emailed Talent</h3>
        <div class="row">
            <table class="table table-striped">
                <tr>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'data.name' ? '-data.name' : 'data.name'); reverse=false">Talent Name</a></span>
                        <span ng-if="predicate == '-data.name'">(^)</span>
                        <span ng-if="predicate == 'data.name'">(V)</span>
                    </th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'data.parentName' ? '-data.parentName' : 'data.parentName'); reverse=false">Parent Name</a></span>
                        <span ng-if="predicate == '-data.parentName'">(^)</span>
                        <span ng-if="predicate == 'data.parentName'">(V)</span>
                    </th>
                    <th>Phone #</th>
                    <th>Alt Phone #</th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'data.locationISDN' ? '-data.locationISDN' : 'data.locationISDN'); reverse=false">Location</a></span>
                        <span ng-if="predicate == '-data.locationISDN'">(^)</span>
                        <span ng-if="predicate == 'data.locationISDN'">(V)</span>
                    </th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'project.title' ? '-project.title' : 'project.title'); reverse=false">Project</a></span>
                        <span ng-if="predicate == '-project.title'">(^)</span>
                        <span ng-if="predicate == 'project.title'">(V)</span>
                    </th>
                    <th>
                        <a href="" ng-click="updatePred(predicate == 'project.estimatedCompletionDate' ? '-project.estimatedCompletionDate' : 'project.estimatedCompletionDate'); reverse=false">Due Time/Date</a></span>
                        <span ng-if="predicate == '-project.estimatedCompletionDate'">(^)</span>
                        <span ng-if="predicate == 'project.estimatedCompletionDate'">(V)</span>
                    </th>
                    <th>Status</th>
                    <th>Email</th>
                </tr>
                <tr ng-repeat="(key, talent) in emailedTalents | orderBy:predicate:reverse">
                    <td>{{talent.data.name}} {{talent.data.lastName}}</td>
                    <td>{{talent.data.parentName}}</td>
                    <td>{{talent.data.phone}}</td>
                    <td>{{talent.data.phone2}}</td>
                    <td>{{talent.data.locationISDN}}</td>
                    <td><a href="/#!/projects/{{talent.project._id}}" target="_blank">{{talent.project.title}}</a></td>
                    <td>{{talent.project.estimatedCompletionDate | amDateFormat:'MM/DD/YY h:mm a'}}</td>
                    <td><select ng-model="emailedTalents[key].status" style="width:100px" ng-change="updateStatus(talent.data._id,talent.project._id, emailedTalents[key].status)" ng-options="item for item in talentStatus"></select></td>
                    <td><button class="btn btn-primary" ng-click="emailCallListTalent(talent,talent.project._id)"><img style="width:30px;height:auto" src="/img/envelope.png" alt="envelope image"></button></td>
                </tr>
            </table>
        </div>
    </div>
</section>