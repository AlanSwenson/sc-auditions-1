
<section data-ng-controller="ProjectsController" data-ng-init="loadProject()">
	<div class="page-header">
		<div class="row">
			<div class="col-lg-8 col-md-8 col-sm-8">
				<h2 style="margin:0">{{project.title}} <small>Due {{project.estimatedCompletionDate | date:'short'}} EST</small></h2>
				<h4>Created by {{project.user.displayName}} {{project.created | amDateFormat:'MM/DD/YY h:mm:ss a'}} EST</h4>
				<a href="/#!/projects-client/{{project._id}}" target="_blank">Click to View in Client Portal</a>
			</div>
			<div class="col-lg-4 col-md-4 col-sm-4">
					<progressbar value="dynamic" type="success" ng-model="progress"><b>{{dynamic}}%</b></progressbar>
					<div ng-if="permitAdminDirector() === false" class="panel-body" data-ng-bind="project.status" style="text-align:center"></div>
					<select class="form-control" style="display:block;margin:0 auto" ng-if="permitAdminDirector()" ng-model="project.status" ng-change="updateProjectStatus()">
                        <option ng-repeat="item in statusOpts" value="{{item}}">{{item}}</option>
                    </select>
                    <div ng-if="permitAdmin()" ng-controller="UsersController" data-ng-init="findFilter('production coordinator')">
                    	<label>Owner</label>
                    	<select class="form-control" style="display:block;margin:0 auto" ng-model="project.owner" ng-change="$parent.update(false)">
	                        <option ng-repeat="user in users" ng-selected="project.owner == user._id" value="{{user._id}}">{{user.firstName}} {{user.lastName}}</option>
	                    </select>
                    </div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-6 col-md-6 col-sm-6">
				<div class="panel panel-default">
					<div class="panel-heading"><strong>Description &amp; Specs</strong></div>
					<div class="panel-body" data-ng-bind="project.description"></div>
				</div>
			</div>
			
			<div class="col-lg-6 col-md-6 col-sm-6">
				<div class="panel panel-default" data-ng-show="permitAdminDirector()">
					<div class="panel-heading">
		            	<strong>Notes</strong>
		        	</div>
		        	<fieldset>
						<select class="form-control" style="display:block;margin:0 auto" ng-if="permitAdminDirector()" ng-class="{blueBg: project.sounders == 'Sounders', yellowBg: project.sounders == 'No Sounders - Approved By William'}" ng-model="project.sounders" ng-change="update(false)">
	                        <option ng-repeat="item in soundersOpts" value="{{item}}">{{item}}</option>
	                    </select>
                	</fieldset>
		        	<fieldset>
						<textarea ng-model="discussion" name="discussion" class="form-control"></textarea>
						<button style="float:right" class="btn btn-primary" ng-click="saveDiscussion()">Save</button>
					</fieldset>
					<div style="max-height:200px;padding:10px;border-top:1px solid #e8e8e8;overflow-y:scroll">
						<div ng-repeat="(key, ditem) in project.discussion.slice().reverse()">
							<h5 ng-if="ditem.deleted === true" class="strike-if"><strong>{{ditem.date | amDateFormat:'MM/DD/YY h:mm:ss a'}} EST - {{ditem.username}}</strong></h5>
							<h5 ng-if="ditem.deleted === false"><strong>{{ditem.date | amDateFormat:'MM/DD/YY h:mm:ss a'}} EST - {{ditem.username}}</strong></h5>
							<div class="clearfix">
								<button ng-show="authentication.user._id === ditem.userid && ditem.deleted === false" style="float:right" class="btn btn-danger" ng-click="deleteDiscussion(key)">Delete</button>
								<p ng-if="ditem.deleted === true" class="strike-if" data-ng-bind="ditem.item"></p>
								<p ng-if="ditem.deleted === false" data-ng-bind="ditem.item"></p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-6 col-md-6 col-sm-6">
				<accordion close-others="oneAtATime">
					<accordion-group is-open="status.open">
					<accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
						<h4 class="panel-title accordion-toggle">
			            	Scripts<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
			            </h4>
		        	</accordion-heading>
						<div data-ng-show="permitAdminDirector()" class="clearfix" style="padding-bottom:5px">

	                    	<fieldset>
								<h4>Upload Script: </h4>
								<div ng-file-drop ng-file-select="uploadScript($files)" ng-model="files" ng-model-rejected="rejFiles"
		                         drag-over-class="{accept:'dragover', reject:'dragover-err', delay:100}" class="drop-box"
		                         ng-multiple="true" ng-accept="'*.pdf'"
		                         drop-available="dropAvailable">
		                            <div ng-hide="dropAvailable">File Drop not available</div>
		                            <div ng-show="dropAvailable">Drop PDFs</div>
		                            <div>or click to select</div>
		                        </div>
							</fieldset>
						</div>
						<ul class="list-group">
							<li class="list-group-item" ng-repeat="(key, script) in project.scripts">
								<div class="row">
                    				<div class="col-lg-10 col-md-10 col-sm-10">
										<strong>{{key+1}}.</strong> <a href="/res/scripts/{{project._id}}/{{script.file.name | encodeUri}}" target="_blank" data-ng-bind="script.file.name"></a> 
										<a href="/res/scripts/{{project._id}}/{{script.file.name}}" target="_blank"><img src="/img/Adobe-Acrobat-icon.png" alt="download PDF"></a>
									</div>
									<div class="col-lg-1 col-md-1 col-sm-1">
										<button data-ng-show="permitAdmin()" ng-click="delScript(key)" target="_blank" class="btn btn-danger">Delete</button>
									</div>
								</div>
							</li>
						</ul>
					</accordion-group>
				</accordion>
			</div>

			<div class="col-lg-6 col-md-6 col-sm-6">
				<accordion close-others="oneAtATime">
					<accordion-group is-open="toggleRefs">
					<accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
						<h4 class="panel-title accordion-toggle">
			            	Reference Files<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
			            </h4>
		        	</accordion-heading>

						<div data-ng-show="permitAdminDirector()" class="clearfix" style="padding-bottom:5px">
							<h4>Upload Reference: </h4>

							<div ng-file-drop ng-file-select="uploadReferenceFile($files)" ng-model="files" ng-model-rejected="rejFiles"
	                         drag-over-class="{accept:'dragover', reject:'dragover-err', delay:100}" class="drop-box"
	                         ng-multiple="true" ng-accept="'*'"
	                         drop-available="dropAvailable">
	                            <div ng-hide="dropAvailable">File Drop not available</div>
	                            <div ng-show="dropAvailable">Drop Anything you would like.</div>
	                            <div>or click to select</div>
	                        </div>

						</div>
						<ul class="list-group">
							<li class="list-group-item" ng-repeat="(key, referenceFile) in project.referenceFiles">
								<div class="row">
                    				<div class="col-lg-10 col-md-10 col-sm-10">
										<strong>{{key+1}}.</strong> <a href="/res/referenceFiles/{{project._id}}/{{referenceFile.file.name | encodeUri}}" target="_blank" data-ng-bind="referenceFile.file.name"></a> 
									</div>
									<div class="col-lg-1 col-md-1 col-sm-1">
										<button data-ng-show="permitAdminDirector()" ng-click="delReferenceFile(key)" target="_blank" class="btn btn-danger">Delete</button>
									</div>
								</div>
							</li>
						</ul>
						
					</accordion-group>
				</accordion>
			</div>
			
		</div>
		
		<div class="row">

			<div class="col-lg-6 col-md-6 col-sm-6">
				<accordion close-others="oneAtATime">
					<accordion-group is-open="status.open">
					<accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
						<h4 class="panel-title accordion-toggle">
		     	       		Talent<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
		     	       	</h4>
		        	</accordion-heading>
						<ul class="list-group">
							<li class="list-group-item" ng-repeat="(key, member) in project.talent"> 
					            <div class="controls" ng-module="talents">
					                <div ng-controller="TalentsController" data-ng-init="getOne(member.talentId)">

										<a target="_blank" href="/#!/talents/{{member.talentId}}">{{talent.name}} {{talent.lastName | limitTo: 1}}</a> 

										- {{talent.locationISDN}}

										<span ng-show="member.requested == true">- R</span>

										<select data-ng-show="$parent.permitEveryOneButClients()" ng-model="project.talent[key].status" ng-init="project.talent[key].status = project.talent[key].status || talentStatus[0]" style="width:100px" ng-change="$parent.updateTalentStatus(key)" ng-options="item for item in talentStatus"></select>

										<span data-ng-show="$parent.permitEveryOneButClients() !== true">{{project.talent[key].status}}</span>
										
										{{project.talent[key].part}}

										<button class="btn btn-primary" ng-click="$parent.sendTalentEmail(project.talent[key])">Email</button>

										<span data-ng-show="$parent.permitEveryOneButClients()">Booked <input type="checkbox" data-ng-model="project.talent[key].booked" ng-checked="project.talent[key].booked" ng-click="$parent.toggleBooked(key)"> 
										
									</div>
								</div>
							</li>
						</ul>
						<accordion close-others="oneAtATime" data-ng-show="permitAdminTalentDirectorProdCoord()">
							<accordion-group is-open="statusInt.open">
							<accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
								<h4 class="panel-title accordion-toggle">
									Edit Talent<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': statusInt.open, 'glyphicon-chevron-right': !statusInt.open}"></i>
								</h4>
							</accordion-heading>
					            <div class="controls" ng-module="talents">
					            	<div style="text-align:center">
										<button class="btn btn-primary" ng-click="createTalent()">Create Talent</button>
									</div>
					                <div ng-controller="TalentsController" data-ng-init="find()">
					                	<label>Search:</label> <input ng-model="filterTeam" class="form-control">
					                	<div class="row">
									        <div class="col-lg-12 col-md-12 col-sm-12">
									            <select ng-init="limit = 20" ng-model="limit" class="form-control">
									                <option value="5" selected>Show 5 per page</option>
									                <option value="10">Show 10 per page</option>
									                <option value="15">Show 15 per page</option>
									                <option value="20">Show 20 per page</option>
									                <option value="30">Show 30 per page</option>
									                <option value="50">Show 50 per page</option>
									                <option value="100">Show 100 per page</option>
									                <option value="200">Show 200 per page</option>
									            </select>
									        </div>
									    </div>
									    <div class="row">
									        <div class="col-lg-12 col-md-12 col-sm-12">
									            <div class="text-center">
									            <ul class="pagination">
									                <li ng-class="{disabled: currentPage == 0}">
									                    <a href ng-click="currentPage=currentPage-1">« Prev</a>
									                </li>
									                <li ng-repeat="n in range(0, Math.floor(talents.length/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()">
									                    <a href ng-bind="n + 1">1</a>
									                </li>
									                <li ng-class="{disabled: currentPage == Math.floor(talents.length/limit)}">
									                    <a href ng-click="currentPage=currentPage+1">Next »</a>
									                </li>
									            </ul>
									            </div>
									        </div>
									    </div>
										<ul class="list-group">
											<li class="list-group-item">
												<div class="row">
													<div class="col-lg-1 col-md-1 col-sm-1">
														<b>C</b>
													</div>
													<div class="col-lg-1 col-md-1 col-sm-1">
														<b>R</b>
													</div>
													<div class="col-lg-4 col-md-4 col-sm-4">
														<b>Part</b>
													</div>
													<div class="col-lg-6 col-md-6 col-sm-6">
														<b>Info</b>
													</div>
												</div>
											</li>
											<li class="list-group-item" ng-repeat="(key, talent) in talents | filter:filterTeam | startFrom:currentPage*limit | limitTo: limit"> 
												<div class="row">
													<div class="col-lg-1 col-md-1 col-sm-1">
														<input type="checkbox" value="{{talent._id}}" ng-click="updateTalent(talent._id, talent.name + ' ' + talent.lastName, talent.email)" ng-checked="checkTalent(talent._id)">
													</div>
													<div class="col-lg-1 col-md-1 col-sm-1">
														<input type="checkbox" value="{{talent._id}}" ng-click="updateRequestTalent(talent._id, talent.name + ' ' + talent.lastName, talent.email)" ng-checked="checkRequestedTalent(talent._id)">
													</div>
													<div class="col-lg-4 col-md-4 col-sm-4">
														<input type="text" class="form-control" ng-model="parts[talent._id]" ng-if="showPartFld(talent._id)">
														<div ng-if="showPartFld(talent._id) == false">{{showPartString(talent._id)}}</div>
													</div>
													<div class="col-lg-6 col-md-6 col-sm-6">
														{{talent.name}} {{talent.lastName}} - {{talent.locationISDN}} - Outage <span ng-show="!talent.outageTimes">None</span><span ng-show="talent.outageTimes != ''">{{talent.outageTimes}}</span>
													</div>
												</div>
											</li>
										</ul>
										<div class="row">
									        <div class="col-lg-12 col-md-12 col-sm-12">
									            <div class="text-center">
									            <ul class="pagination">
									                <li ng-class="{disabled: currentPage == 0}">
									                    <a href ng-click="currentPage=currentPage-1">« Prev</a>
									                </li>
									                <li ng-repeat="n in range(0, Math.floor(talents.length/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()">
									                    <a href ng-bind="n + 1">1</a>
									                </li>
									                <li ng-class="{disabled: currentPage == Math.floor(talents.length/limit)}">
									                    <a href ng-click="currentPage=currentPage+1">Next »</a>
									                </li>
									            </ul>
									            </div>
									        </div>
									    </div>
									</div>
								</div>
							</accordion-group>
						</accordion>
					</accordion-group>
				</accordion>
			</div>

			<div class="col-lg-6 col-md-6 col-sm-6">		
				<accordion close-others="oneAtATime">
					<accordion-group is-open="status.open">
					<accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
						<h4 class="panel-title accordion-toggle">
			            	Auditions<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
			            </h4>
		        	</accordion-heading>
				 		<div data-ng-show="permitAdminDirector()" class="clearfix" style="padding-bottom:5px">
							<h4>Upload Audition Files: (*.mp3 only!)</h4>

							<div ng-file-drop ng-file-select="uploadAudition($files)" ng-model="files" ng-model-rejected="rejFiles"
	                         drag-over-class="{accept:'dragover', reject:'dragover-err', delay:100}" class="drop-box"
	                         ng-multiple="true" ng-accept="'*.mp3'"
	                         drop-available="dropAvailable">
	                            <div ng-hide="dropAvailable">File Drop not available</div>
	                            <div ng-show="dropAvailable">Drop *.mp3 files..</div>
	                            <div>or click to select</div>
	                        </div>

						</div>
						<ul class="list-group">
							<li class="list-group-item" ng-repeat="(key, audition) in project.auditions">
								<fieldset>
									<strong>{{key+1}}.</strong> <a href="/res/auditions/{{project._id}}/{{audition.file.name | encodeUri}}" target="_blank" data-ng-bind="audition.file.name" class="inline-playable">ngAudio</a> 
								</fieldset>
								<fieldset>
									<span ng-show="verifyAudio(key)">
										<button ng-click="playAudio(key, audition.file.name)" class="btn btn-primary">
											<span ng-if="lastAudioID == key && audioStatus == 1">
												pause
											</span>
											<span ng-if="lastAudioID != key || audioStatus != 1">
												Play
											</span>
										</button> 
										<button ng-click="stopAudio()" class="btn btn-primary">Stop</button>
									</span>
									<button ng-show="showRename === 0" ng-click="showRename = 1" class="btn btn-primary">Rename</button>
									<button data-ng-show="permitAdminDirector()" ng-click="delAudition(key)" class="btn btn-danger">Delete</button>
								</fieldset>
								<fieldset ng-show="showRename">
									<input type="text" ng-model="project.auditions[key].rename" placeholder="Enter new filename" class="form-control">
									<button ng-click="update(false);showRename = 0;" class="btn btn-primary">Update</button><button ng-click="showRename = 0;" class="btn btn-primary">Cancel</button>
								</fieldset>
								<fieldset>
									<label>Published</label>
									<input type="checkbox" value="true" ng-click="updatePublished(key)" ng-model="project.auditions[key].published">
								</fieldset>
								<fieldset>
									<label>Rating {{project.auditions[key].rating[authentication.user._id]}}</label>
									<rating ng-model="audition.avgRating" readonly="false" ng-click="updateRating(audition.file.path, false)" max="max" on-leave="overStar = audition.avgRating" on-hover="hoveringOver(value,key)"></rating>
									<p data-ng-show="audition.avgRating">Average: 
										<rating ng-model="audition.avgRating" readonly="true" max="max" on-leave="overStar = audition.avgRating" ></rating>
									</p>
								</fieldset>
								<fieldset>
									Booked: <img ng-if="audition.booked" src="/img/green-check.png" style="width:20px;height:auto">
								</fieldset>
								<fieldset>
									<span ng-if="audition.favorite == 1">
										<img src="/img/gold-trophy.png" alt="favorited audition">
									</span>
								</fieldset>
							</li>
						</ul>
						
				</accordion-group>
				</accordion>
			</div>

			
		</div>
		
		<div class="row">
			<div class="col-lg-6 col-md-6 col-sm-6">
				<accordion close-others="oneAtATime" data-ng-show="permitAdminDirector()">
					<accordion-group is-open="status.open">
					<accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
						<h4 class="panel-title accordion-toggle">
		            		Main Clients<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
		            	</h4>
		        	</accordion-heading>

		        		<div style="text-align:center;padding-bottom:7px">
							<button class="btn btn-primary" ng-click="sendClientEmail('opening')">Opening Email</button>
							<button class="btn btn-primary" ng-click="sendClientEmail('carryover')">Carryover Email</button>
							<button class="btn btn-primary" ng-click="sendClientEmail('closing')">Closing Email</button>
						</div>

						<ul class="list-group">
							<li class="list-group-item" ng-repeat="(key, member) in project.client">
								<input type="checkbox" ng-model="selectedMainClients[key]" ng-true-value="{{member.userId}}"> <a target="_blank" href="/#!/usersedit/{{member.userId}}">{{member.name}}</a>
							</li>
						</ul>
						
						<accordion close-others="oneAtATime">
							<accordion-group is-open="statusInt.open">
							<accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
								<h4 class="panel-title accordion-toggle">
									Edit Main Clients<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': statusInt.open, 'glyphicon-chevron-right': !statusInt.open}"></i>
								</h4>
							</accordion-heading>
					            <div class="controls" ng-module="users">
					            	<div style="text-align:center">
										<button class="btn btn-primary" ng-click="createClient('client')">Create Client</button>
									</div>
					                <div ng-controller="UsersController" data-ng-init="findFilter('client')">
					                	<label>Search:</label> <input ng-model="filterClient" class="form-control">
					                	<div class="row">
									        <div class="col-lg-12 col-md-12 col-sm-12">
									            <select ng-init="limit = 20" ng-model="limit" class="form-control">
									                <option value="5" selected>Show 5 per page</option>
									                <option value="10">Show 10 per page</option>
									                <option value="15">Show 15 per page</option>
									                <option value="20">Show 20 per page</option>
									                <option value="30">Show 30 per page</option>
									                <option value="50">Show 50 per page</option>
									                <option value="100">Show 100 per page</option>
									                <option value="200">Show 200 per page</option>
									            </select>
									        </div>
									    </div>
									    <div class="row">
									        <div class="col-lg-12 col-md-12 col-sm-12">
									            <div class="text-center">
									            <ul class="pagination">
									                <li ng-class="{disabled: currentPage == 0}">
									                    <a href ng-click="currentPage=currentPage-1">« Prev</a>
									                </li>
									                <li ng-repeat="n in range(0, Math.floor(talents.length/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()">
									                    <a href ng-bind="n + 1">1</a>
									                </li>
									                <li ng-class="{disabled: currentPage == Math.floor(talents.length/limit)}">
									                    <a href ng-click="currentPage=currentPage+1">Next »</a>
									                </li>
									            </ul>
									            </div>
									        </div>
									    </div>
										<ul class="list-group">
											<li class="list-group-item" ng-repeat="(key, user) in users | filter:filterClient | startFrom:currentPage*limit | limitTo: limit"><input type="checkbox" value="{{user._id}}" ng-click="updateClient(user._id, user.displayName, user.email)" ng-checked="checkClientUsers(user._id)"> <a target="_blank" href="/#!/usersedit/{{user._id}}">{{user.displayName}}</a></li>
										</ul>
										<div class="row">
									        <div class="col-lg-12 col-md-12 col-sm-12">
									            <div class="text-center">
									            <ul class="pagination">
									                <li ng-class="{disabled: currentPage == 0}">
									                    <a href ng-click="currentPage=currentPage-1">« Prev</a>
									                </li>
									                <li ng-repeat="n in range(0, Math.floor(talents.length/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()">
									                    <a href ng-bind="n + 1">1</a>
									                </li>
									                <li ng-class="{disabled: currentPage == Math.floor(talents.length/limit)}">
									                    <a href ng-click="currentPage=currentPage+1">Next »</a>
									                </li>
									            </ul>
									            </div>
									        </div>
									    </div>
									</div>
								</div>
							</accordion-group>
							
						</accordion>
					</accordion-group>
				</accordion>

				<accordion close-others="oneAtATime" data-ng-show="permitAdminDirector() || permitClient()">
					<accordion-group is-open="status.open">
					<accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
						<h4 class="panel-title accordion-toggle">
		            		Additional Clients<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
		            	</h4>
		        	</accordion-heading>
						<ul class="list-group">
							<li class="list-group-item" ng-repeat="(key, member) in project.clientClient"><a target="_blank" href="/#!/usersedit/{{member.userId}}">{{member.name}}</a></li>
						</ul>
						<accordion close-others="oneAtATime">
							<accordion-group is-open="statusInt.open">
							<accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
								<h4 class="panel-title accordion-toggle">
									Edit Additional Clients<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': statusInt.open, 'glyphicon-chevron-right': !statusInt.open}"></i>
								</h4>
							</accordion-heading>
					            <div class="controls" ng-module="users">
					            	<div style="text-align:center">
										<button class="btn btn-primary" ng-click="createClient('client-client')">Create Client</button>
									</div>
					                <div ng-controller="UsersListController" data-ng-init="findFilter('client-client')">
					                	<label>Search:</label> <input ng-model="filterClientClient" class="form-control">
					                	<div class="row">
									        <div class="col-lg-12 col-md-12 col-sm-12">
									            <select ng-init="limit = 20" ng-model="limit" class="form-control">
									                <option value="5" selected>Show 5 per page</option>
									                <option value="10">Show 10 per page</option>
									                <option value="15">Show 15 per page</option>
									                <option value="20">Show 20 per page</option>
									                <option value="30">Show 30 per page</option>
									                <option value="50">Show 50 per page</option>
									                <option value="100">Show 100 per page</option>
									                <option value="200">Show 200 per page</option>
									            </select>
									        </div>
									    </div>
									    <div class="row">
									        <div class="col-lg-12 col-md-12 col-sm-12">
									            <div class="text-center">
									            <ul class="pagination">
									                <li ng-class="{disabled: currentPage == 0}">
									                    <a href ng-click="currentPage=currentPage-1">« Prev</a>
									                </li>
									                <li ng-repeat="n in range(0, Math.floor(talents.length/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()">
									                    <a href ng-bind="n + 1">1</a>
									                </li>
									                <li ng-class="{disabled: currentPage == Math.floor(talents.length/limit)}">
									                    <a href ng-click="currentPage=currentPage+1">Next »</a>
									                </li>
									            </ul>
									            </div>
									        </div>
									    </div>
										<ul class="list-group">
											<li class="list-group-item" ng-repeat="(key, user) in users | filter:filterClientClient | startFrom:currentPage*limit | limitTo: limit"><input type="checkbox" value="{{user._id}}" ng-click="updateClientClient(user._id, user.displayName, user.email)" ng-checked="checkClientClientUsers(user._id)"> <a target="_blank" href="/#!/usersedit/{{user._id}}">{{user.displayName}}</a></li>
										</ul>
										<div class="row">
									        <div class="col-lg-12 col-md-12 col-sm-12">
									            <div class="text-center">
									            <ul class="pagination">
									                <li ng-class="{disabled: currentPage == 0}">
									                    <a href ng-click="currentPage=currentPage-1">« Prev</a>
									                </li>
									                <li ng-repeat="n in range(0, Math.floor(talents.length/limit))" ng-class="{active: n == currentPage}" ng-click="setPage()">
									                    <a href ng-bind="n + 1">1</a>
									                </li>
									                <li ng-class="{disabled: currentPage == Math.floor(talents.length/limit)}">
									                    <a href ng-click="currentPage=currentPage+1">Next »</a>
									                </li>
									            </ul>
									            </div>
									        </div>
									    </div>
									</div>
								</div>
							</accordion-group>
						</accordion>
					</accordion-group>
				</accordion>
			</div>
			
			<div class="col-lg-6 col-md-6 col-sm-6">
				<accordion close-others="oneAtATime" data-ng-show="permitAdminDirector() || permitClient() || permitClientClient()">
					<accordion-group is-open="status.open">
					<accordion-heading data-toggle="collapse" data-parent="#accordion" data-target="#collapseOne">
						<h4 class="panel-title accordion-toggle">
		            	Phases<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
		            	</h4>
		        	</accordion-heading>
					<accordion close-others="oneAtATime">
						<div class="panel panel-default" ng-repeat="(key, phase) in project.phases">
							<div class="panel-heading"><strong>{{project.phases[key].name}}</strong></div>
							<div class="panel-body">
								<span data-ng-show="permitAdminDirector()">
									<div class="row">
										<div class="col-lg-3 col-md-3 col-sm-3">
											<label>Status:</label>
										</div>
										<div class="col-lg-9 col-md-9 col-sm-9">
											<select ng-model="project.phases[key].status" class="form-control" ng-change="updateStatus(key)" ng-options="item for item in project.phases[key].options">
							        		</select>
							        	</div>
							        </div>
							        <div class="row">
										<div class="col-lg-3 col-md-3 col-sm-3">
							        		<label>End Date:</label>
							        	</div>
							        	<div class="col-lg-9 col-md-9 col-sm-9">
							        		<p>{{project.phases[key].endDate | amDateFormat:'MM/DD/YY h:mm:ss a'}}</p>
							        	</div>
							        </div>
					    		</span>
					    		<span data-ng-show="permitClient() || permitClientClient()">
					    			<div class="row">
										<div class="col-lg-3 col-md-3 col-sm-3">
							    			<label>Status:</label>
						    			</div>
							        	<div class="col-lg-9 col-md-9 col-sm-9">
											<p>{{project.phases[key].status}}</p>
										</div>
									</div>
									<div class="row">
										<div class="col-lg-3 col-md-3 col-sm-3">
							        		<label>End Date:</label>
						        		</div>
							        	<div class="col-lg-9 col-md-9 col-sm-9">
							        		<p>{{project.phases[key].endDate | amDateFormat:'MM/DD/YY h:mm:ss a'}}</p>
							        	</div>
							        </div>
					    		</span>
					        </div>
						</div>
				    </accordion>
			    </accordion>
			</div>

		</div>
	</div>
	<div class="pull-right" data-ng-show="permitAdminDirector()" style="padding-bottom:75px">
		<a class="btn btn-primary" href="/#!/projects/{{project._id}}/edit">
			<i class="glyphicon glyphicon-edit"></i>
		</a>
		<a class="btn btn-primary" data-ng-click="remove();">
			<i class="glyphicon glyphicon-trash"></i>
		</a>
	</div>

	<div class="container" style="position:fixed;bottom:0;background:#fff;z-index:999;padding-top:5px">
		<div class="row" data-ng-show="permitAdminDirector()">
			<div class="col-lg-12 col-md-12 col-sm-12">
				<ul style="clear:both" ng-show="rejFiles.length > 0" class="response">
					<li class="sel-file" ng-repeat="f in rejFiles">
						Rejected file: {{f.name}} - size: {{f.size}}B - type: {{f.type}}
					</li>
				</ul>
				<div data-ng-bind="uploadStatus"></div>
				<progressbar value="uploadprogress" type="success" ng-model="upload"><b>{{uploadfile}}</b></progressbar>
			</div>
		</div>
	</div>

</section>